# moji-guess é–‹ç™ºå¼•ãç¶™ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## æ¦‚è¦

ã€Œã‚ã„ã†ãˆãƒãƒˆãƒ«ã€é¢¨ã®æ–‡å­—å½“ã¦ã‚²ãƒ¼ãƒ ã‚’Webãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ—ãƒ¬ã‚¤ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã™ã§ã«Firebaseã‚’ä½¿ã£ãŸã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ã®é–‹ç™ºçµŒé¨“ãŒã‚ã‚‹ã€‚

**ãƒªãƒã‚¸ãƒˆãƒªå**: `moji-guess`ï¼ˆæ–‡å­—ã‚²ã‚¹ï¼‰

### å¯¾å¿œäºˆå®š
- **Phase 1**: ã²ã‚‰ãŒãªç‰ˆï¼ˆ50éŸ³ï¼‰
- **Phase 2**: ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆç‰ˆï¼ˆA-Zï¼‰â† å°†æ¥å¯¾å¿œ

---

## åŸä½œã‚²ãƒ¼ãƒ æƒ…å ±

### åŸºæœ¬æƒ…å ±
- **ã‚²ãƒ¼ãƒ å**: ã‚‚ã˜ã‚ã¦ã‚²ãƒ¼ãƒ  ã‚ã„ã†ãˆãƒãƒˆãƒ«
- **ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³**: ç±³å…‰ä¸€æˆ
- **ä¼ç”»**: Anaguma
- **å‡ºç‰ˆ**: å¹»å†¬èˆã‚¨ãƒ‡ãƒ¥ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- **ãƒ—ãƒ¬ã‚¤äººæ•°**: 2ã€œ5äºº
- **ãƒ—ãƒ¬ã‚¤æ™‚é–“**: ç´„15åˆ†
- **å¯¾è±¡å¹´é½¢**: 6æ­³ä»¥ä¸Š
- **å…¬å¼ãƒšãƒ¼ã‚¸**: https://www.gentosha-edu.co.jp/smp/book/b640622.html
- **å—è³**: æ—¥æœ¬ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ å¤§è³2024 æŠ•ç¥¨éƒ¨é–€ å¤§è³

### ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«è©³ç´°

#### æº–å‚™
1. ãŠé¡Œã‚’æ±ºã‚ã‚‹ï¼ˆä¾‹ï¼šã€Œå‹•ç‰©ã€ã€Œé£Ÿã¹ã‚‚ã®ã€ã€Œè¡ŒããŸã„æ‰€ã€ã€Œèµ¤ã„ã‚‚ã®ã€ãªã©ï¼‰
2. å„ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ãŠé¡Œã«æ²¿ã£ãŸ **2ã€œ7æ–‡å­—ã®ã²ã‚‰ãŒãª** ã®è¨€è‘‰ã‚’ç§˜å¯†ã§æ±ºã‚ã‚‹

#### æ–‡å­—ãƒ«ãƒ¼ãƒ«ï¼ˆé‡è¦ï¼‰
- **æ¿ç‚¹ï¼ˆã‚›ï¼‰ãƒ»åŠæ¿ç‚¹ï¼ˆã‚œï¼‰ã¯æ›¸ã‹ãªã„**
  - ä¾‹ï¼šã€Œãã†ã€â†’ã€Œãã†ã€ã€ã€Œã±ã‚“ã ã€â†’ã€Œã¯ã‚“ãŸã€
- **å°æ–‡å­—ï¼ˆã‚ƒã‚…ã‚‡ã£ï¼‰ã¯å¤§æ–‡å­—ã¨ã—ã¦æ‰±ã†**
  - ä¾‹ï¼šã€Œãã‚‡ã†ã‚Šã‚…ã†ã€â†’ã€Œãã‚ˆã†ã‚Šã‚†ã†ã€
- **ä½¿ã‚ãªã„æ–‡å­—ã®æ¬„ã«ã¯ã€ŒÃ—ã€ã‚’æ›¸ã**
  - ä¾‹ï¼š3æ–‡å­—ã®è¨€è‘‰ãªã‚‰ã€4ã€œ7æ–‡å­—ç›®ã¯ã€ŒÃ—ã€

#### ã‚²ãƒ¼ãƒ é€²è¡Œ
1. **æ”»æ’ƒãƒ•ã‚§ãƒ¼ã‚º**: æ‰‹ç•ªãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒ50éŸ³ãƒœãƒ¼ãƒ‰ã‹ã‚‰1æ–‡å­—ã‚’é¸ã‚“ã§ã€Œæ”»æ’ƒã€
2. **åˆ¤å®šãƒ•ã‚§ãƒ¼ã‚º**: 
   - ãã®æ–‡å­—ã‚’ç§˜å¯†ã®è¨€è‘‰ã«ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ã€è©²å½“ã™ã‚‹æ–‡å­—ã‚’å…¬é–‹ã™ã‚‹
   - 1äººã§ã‚‚å½“ãŸã‚ŠãŒã‚ã‚Œã°ã€æ”»æ’ƒè€…ã¯ç¶šã‘ã¦ã‚‚ã†1å›æ”»æ’ƒã§ãã‚‹
   - èª°ã«ã‚‚å½“ãŸã‚‰ãªã‘ã‚Œã°ã€æ¬¡ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ‰‹ç•ªã¸
3. **è„±è½åˆ¤å®š**: ç§˜å¯†ã®è¨€è‘‰ãŒã™ã¹ã¦å…¬é–‹ã•ã‚ŒãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯è„±è½
4. **å‹åˆ©æ¡ä»¶**: æœ€å¾Œã¾ã§æ®‹ã£ãŸ1äººãŒå‹è€…

#### 50éŸ³ãƒœãƒ¼ãƒ‰
```
ã‚ ã„ ã† ãˆ ãŠ
ã‹ ã ã ã‘ ã“
ã• ã— ã™ ã› ã
ãŸ ã¡ ã¤ ã¦ ã¨
ãª ã« ã¬ ã­ ã®
ã¯ ã² ãµ ã¸ ã»
ã¾ ã¿ ã‚€ ã‚ ã‚‚
ã‚„    ã‚†    ã‚ˆ
ã‚‰ ã‚Š ã‚‹ ã‚Œ ã‚
ã‚          ã‚’
ã‚“
```
â€» æ¿ç‚¹ãƒ»åŠæ¿ç‚¹ã®è¡Œã¯å­˜åœ¨ã—ãªã„ï¼ˆãƒ«ãƒ¼ãƒ«ä¸Šä¸è¦ã®ãŸã‚ï¼‰
â€» è£é¢ã¯ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆç‰ˆãŒã‚ã‚‹ãŒã€ã¾ãšã¯ã²ã‚‰ãŒãªç‰ˆã‚’å®Ÿè£…

---

## ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ï¼ˆæ¨å¥¨ï¼‰
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Reactï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆã‚ã›ã‚‹ï¼‰
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Firebase
  - Firestore ã¾ãŸã¯ Realtime Database
  - Cloud Functionsï¼ˆç§˜å¯†ã®è¨€è‘‰ã‚’ä¿è­·ã™ã‚‹ãŸã‚ã«æ¨å¥¨ï¼‰
  - Firebase Authï¼ˆåŒ¿åèªè¨¼ï¼‰
  - Firebase Hosting
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: Tailwind CSS ã¾ãŸã¯æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆã‚ã›ã‚‹

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ

#### Firestoreæ§‹é€ ï¼ˆæ¨å¥¨æ¡ˆï¼‰

```
/rooms/{roomId}
â”œâ”€â”€ status: "waiting" | "inputting" | "playing" | "finished"
â”œâ”€â”€ hostId: string                    // ãƒ«ãƒ¼ãƒ ä½œæˆè€…ã®UID
â”œâ”€â”€ theme: string                     // ãŠé¡Œï¼ˆä¾‹ï¼š"å‹•ç‰©"ï¼‰
â”œâ”€â”€ currentTurnPlayerId: string       // ç¾åœ¨ã®æ‰‹ç•ªãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®UID
â”œâ”€â”€ turnOrder: string[]               // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®é †ç•ªï¼ˆUIDã®é…åˆ—ï¼‰
â”œâ”€â”€ attackedLetters: string[]         // æ”»æ’ƒæ¸ˆã¿ã®æ–‡å­—ï¼ˆä¾‹ï¼š["ã‚", "ã‹"]ï¼‰
â”œâ”€â”€ winnerId: string | null           // å‹è€…ã®UID
â”œâ”€â”€ settings: {
â”‚   â”œâ”€â”€ maxPlayers: number            // æœ€å¤§äººæ•°ï¼ˆ2-5ï¼‰
â”‚   â”œâ”€â”€ wordLengthMin: number         // æœ€å°æ–‡å­—æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 2ï¼‰
â”‚   â”œâ”€â”€ wordLengthMax: number         // æœ€å¤§æ–‡å­—æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 7ï¼‰
â”‚   â””â”€â”€ inputTimeLimit: number | null // å…¥åŠ›åˆ¶é™æ™‚é–“ï¼ˆç§’ã€nullãªã‚‰ç„¡åˆ¶é™ï¼‰
â”‚   }
â”œâ”€â”€ createdAt: Timestamp
â””â”€â”€ updatedAt: Timestamp

/rooms/{roomId}/players/{odLyerId}
â”œâ”€â”€ odLyerId: string                  // Firebase Authã®UID
â”œâ”€â”€ name: string                       // è¡¨ç¤ºå
â”œâ”€â”€ order: number                      // é †ç•ªï¼ˆ1ã‹ã‚‰é–‹å§‹ï¼‰
â”œâ”€â”€ isEliminated: boolean              // è„±è½ã—ãŸã‹ã©ã†ã‹
â”œâ”€â”€ revealedPositions: number[]        // å…¬é–‹ã•ã‚ŒãŸæ–‡å­—ã®ä½ç½®ï¼ˆ0-indexedï¼‰
â”œâ”€â”€ wordLength: number                 // ç§˜å¯†ã®è¨€è‘‰ã®æ–‡å­—æ•°
â”œâ”€â”€ joinedAt: Timestamp
â””â”€â”€ isReady: boolean                   // è¨€è‘‰å…¥åŠ›å®Œäº†ãƒ•ãƒ©ã‚°

/rooms/{roomId}/secrets/{odLyerId}
â””â”€â”€ word: string                       // ç§˜å¯†ã®è¨€è‘‰ï¼ˆæœ¬äººã®ã¿èª­ã¿å–ã‚Šå¯ï¼‰
```

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ï¼ˆé‡è¦ï¼‰

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // ãƒ«ãƒ¼ãƒ æƒ…å ±ã¯å‚åŠ è€…å…¨å“¡ãŒèª­ã‚ã‚‹
    match /rooms/{roomId} {
      allow read: if isRoomMember(roomId);
      allow create: if request.auth != null;
      allow update: if isRoomMember(roomId);
      
      // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ã¯å‚åŠ è€…å…¨å“¡ãŒèª­ã‚ã‚‹
      match /players/{odLyerId} {
        allow read: if isRoomMember(roomId);
        allow write: if request.auth.uid == odLyerId || isHost(roomId);
      }
      
      // ç§˜å¯†ã®è¨€è‘‰ã¯æœ¬äººã®ã¿èª­ã¿æ›¸ãå¯èƒ½
      match /secrets/{odLyerId} {
        allow read: if request.auth.uid == odLyerId;
        allow write: if request.auth.uid == odLyerId;
      }
    }
    
    function isRoomMember(roomId) {
      return exists(/databases/$(database)/documents/rooms/$(roomId)/players/$(request.auth.uid));
    }
    
    function isHost(roomId) {
      return get(/databases/$(database)/documents/rooms/$(roomId)).data.hostId == request.auth.uid;
    }
  }
}
```

### Cloud Functionsè¨­è¨ˆ

ç§˜å¯†ã®è¨€è‘‰ã‚’å®ˆã‚ŠãªãŒã‚‰æ”»æ’ƒåˆ¤å®šã‚’è¡Œã†ãŸã‚ã€Cloud Functionsã‚’ä½¿ç”¨ã™ã‚‹ã€‚

#### 1. attackLetter - æ”»æ’ƒå‡¦ç†

```typescript
// functions/src/index.ts

import * as functions from 'firebase-functions';
import * as admin from 'firebase-admin';

admin.initializeApp();
const db = admin.firestore();

interface AttackRequest {
  roomId: string;
  letter: string;  // æ”»æ’ƒã™ã‚‹æ–‡å­—ï¼ˆä¾‹ï¼š"ã"ï¼‰
}

interface AttackResult {
  success: boolean;
  hits: {
    odLyerId: string;
    positions: number[];  // å½“ãŸã£ãŸä½ç½®
  }[];
  eliminated: string[];    // ã“ã®æ”»æ’ƒã§è„±è½ã—ãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®UID
  continueAttack: boolean; // ç¶šã‘ã¦æ”»æ’ƒå¯èƒ½ã‹
  nextTurnPlayerId: string | null;
  gameFinished: boolean;
  winnerId: string | null;
}

export const attackLetter = functions.https.onCall(
  async (data: AttackRequest, context): Promise<AttackResult> => {
    // èªè¨¼ãƒã‚§ãƒƒã‚¯
    if (!context.auth) {
      throw new functions.https.HttpsError('unauthenticated', 'ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™');
    }
    
    const { roomId, letter } = data;
    const attackerId = context.auth.uid;
    
    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    if (!isValidHiragana(letter)) {
      throw new functions.https.HttpsError('invalid-argument', 'ç„¡åŠ¹ãªæ–‡å­—ã§ã™');
    }
    
    const roomRef = db.collection('rooms').doc(roomId);
    const room = await roomRef.get();
    
    if (!room.exists) {
      throw new functions.https.HttpsError('not-found', 'ãƒ«ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
    }
    
    const roomData = room.data()!;
    
    // æ‰‹ç•ªãƒã‚§ãƒƒã‚¯
    if (roomData.currentTurnPlayerId !== attackerId) {
      throw new functions.https.HttpsError('permission-denied', 'ã‚ãªãŸã®æ‰‹ç•ªã§ã¯ã‚ã‚Šã¾ã›ã‚“');
    }
    
    // ã™ã§ã«æ”»æ’ƒæ¸ˆã¿ã®æ–‡å­—ã‹ãƒã‚§ãƒƒã‚¯
    if (roomData.attackedLetters.includes(letter)) {
      throw new functions.https.HttpsError('invalid-argument', 'ã™ã§ã«æ”»æ’ƒæ¸ˆã¿ã®æ–‡å­—ã§ã™');
    }
    
    // å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç§˜å¯†ã®è¨€è‘‰ã‚’å–å¾—ã—ã¦åˆ¤å®š
    const playersSnapshot = await roomRef.collection('players').get();
    const secretsSnapshot = await roomRef.collection('secrets').get();
    
    const secrets: Record<string, string> = {};
    secretsSnapshot.forEach(doc => {
      secrets[doc.id] = doc.data().word;
    });
    
    const hits: AttackResult['hits'] = [];
    const eliminated: string[] = [];
    
    // å„ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ã¤ã„ã¦åˆ¤å®š
    for (const playerDoc of playersSnapshot.docs) {
      const odLyerId = playerDoc.id;
      const playerData = playerDoc.data();
      
      // è„±è½æ¸ˆã¿ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ã‚¹ã‚­ãƒƒãƒ—
      if (playerData.isEliminated) continue;
      
      // æ”»æ’ƒè€…è‡ªèº«ã‚‚ã‚¹ã‚­ãƒƒãƒ—
      if (odLyerId === attackerId) continue;
      
      const word = secrets[odLyerId];
      if (!word) continue;
      
      // æ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
      const positions: number[] = [];
      for (let i = 0; i < word.length; i++) {
        if (word[i] === letter) {
          positions.push(i);
        }
      }
      
      if (positions.length > 0) {
        hits.push({ odLyerId, positions });
        
        // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å…¬é–‹ä½ç½®ã‚’æ›´æ–°
        const newRevealed = [...new Set([...playerData.revealedPositions, ...positions])];
        await roomRef.collection('players').doc(odLyerId).update({
          revealedPositions: newRevealed
        });
        
        // å…¨æ–‡å­—å…¬é–‹ã•ã‚ŒãŸã‹ãƒã‚§ãƒƒã‚¯
        if (newRevealed.length >= word.length) {
          await roomRef.collection('players').doc(odLyerId).update({
            isEliminated: true
          });
          eliminated.push(odLyerId);
        }
      }
    }
    
    // æ”»æ’ƒæ¸ˆã¿æ–‡å­—ã«è¿½åŠ 
    await roomRef.update({
      attackedLetters: admin.firestore.FieldValue.arrayUnion(letter)
    });
    
    // ç¶šã‘ã¦æ”»æ’ƒå¯èƒ½ã‹ï¼ˆ1äººä»¥ä¸Šãƒ’ãƒƒãƒˆã—ãŸå ´åˆï¼‰
    const continueAttack = hits.length > 0;
    
    // å‹åˆ©åˆ¤å®š
    const remainingPlayers = playersSnapshot.docs.filter(doc => {
      const data = doc.data();
      return !data.isEliminated && !eliminated.includes(doc.id);
    });
    
    let gameFinished = false;
    let winnerId: string | null = null;
    let nextTurnPlayerId: string | null = roomData.currentTurnPlayerId;
    
    if (remainingPlayers.length <= 1) {
      gameFinished = true;
      winnerId = remainingPlayers.length === 1 ? remainingPlayers[0].id : null;
      await roomRef.update({
        status: 'finished',
        winnerId
      });
    } else if (!continueAttack) {
      // æ¬¡ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¸
      nextTurnPlayerId = getNextPlayer(
        roomData.turnOrder,
        attackerId,
        eliminated,
        playersSnapshot.docs.filter(d => d.data().isEliminated).map(d => d.id)
      );
      await roomRef.update({
        currentTurnPlayerId: nextTurnPlayerId
      });
    }
    
    return {
      success: true,
      hits,
      eliminated,
      continueAttack,
      nextTurnPlayerId,
      gameFinished,
      winnerId
    };
  }
);

function isValidHiragana(char: string): boolean {
  const hiragana = 'ã‚ã„ã†ãˆãŠã‹ããã‘ã“ã•ã—ã™ã›ããŸã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»ã¾ã¿ã‚€ã‚ã‚‚ã‚„ã‚†ã‚ˆã‚‰ã‚Šã‚‹ã‚Œã‚ã‚ã‚’ã‚“';
  return char.length === 1 && hiragana.includes(char);
}

function getNextPlayer(
  turnOrder: string[],
  currentPlayer: string,
  newlyEliminated: string[],
  previouslyEliminated: string[]
): string {
  const allEliminated = [...previouslyEliminated, ...newlyEliminated];
  const currentIndex = turnOrder.indexOf(currentPlayer);
  
  for (let i = 1; i < turnOrder.length; i++) {
    const nextIndex = (currentIndex + i) % turnOrder.length;
    const nextPlayer = turnOrder[nextIndex];
    if (!allEliminated.includes(nextPlayer)) {
      return nextPlayer;
    }
  }
  
  return currentPlayer; // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
}
```

#### 2. validateWord - è¨€è‘‰å…¥åŠ›ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
interface ValidateWordRequest {
  roomId: string;
  word: string;
}

export const validateWord = functions.https.onCall(
  async (data: ValidateWordRequest, context) => {
    if (!context.auth) {
      throw new functions.https.HttpsError('unauthenticated', 'ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™');
    }
    
    const { roomId, word } = data;
    const odLyerId = context.auth.uid;
    
    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
    const errors = validateSecretWord(word);
    if (errors.length > 0) {
      return { valid: false, errors };
    }
    
    // æ­£è¦åŒ–ï¼ˆæ¿ç‚¹é™¤å»ã€å°æ–‡å­—â†’å¤§æ–‡å­—ï¼‰
    const normalizedWord = normalizeWord(word);
    
    // ä¿å­˜
    const roomRef = db.collection('rooms').doc(roomId);
    await roomRef.collection('secrets').doc(odLyerId).set({
      word: normalizedWord
    });
    
    await roomRef.collection('players').doc(odLyerId).update({
      isReady: true,
      wordLength: normalizedWord.length
    });
    
    return { valid: true, normalizedWord };
  }
);

function validateSecretWord(word: string): string[] {
  const errors: string[] = [];
  
  if (word.length < 2 || word.length > 7) {
    errors.push('è¨€è‘‰ã¯2ã€œ7æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„');
  }
  
  // ã²ã‚‰ãŒãªã®ã¿è¨±å¯ï¼ˆæ¿ç‚¹ãƒ»åŠæ¿ç‚¹ä»˜ãã‚‚è¨±å¯ã—ã€å¾Œã§æ­£è¦åŒ–ï¼‰
  const hiraganaPattern = /^[ã-ã‚“]+$/;
  if (!hiraganaPattern.test(word)) {
    errors.push('ã²ã‚‰ãŒãªã®ã¿ä½¿ç”¨ã§ãã¾ã™');
  }
  
  return errors;
}

function normalizeWord(word: string): string {
  // æ¿ç‚¹ãƒ»åŠæ¿ç‚¹ã‚’é™¤å»
  const dakutenMap: Record<string, string> = {
    'ãŒ': 'ã‹', 'ã': 'ã', 'ã': 'ã', 'ã’': 'ã‘', 'ã”': 'ã“',
    'ã–': 'ã•', 'ã˜': 'ã—', 'ãš': 'ã™', 'ãœ': 'ã›', 'ã': 'ã',
    'ã ': 'ãŸ', 'ã¢': 'ã¡', 'ã¥': 'ã¤', 'ã§': 'ã¦', 'ã©': 'ã¨',
    'ã°': 'ã¯', 'ã³': 'ã²', 'ã¶': 'ãµ', 'ã¹': 'ã¸', 'ã¼': 'ã»',
    'ã±': 'ã¯', 'ã´': 'ã²', 'ã·': 'ãµ', 'ãº': 'ã¸', 'ã½': 'ã»',
    'ã‚”': 'ã†'
  };
  
  // å°æ–‡å­—ã‚’å¤§æ–‡å­—ã«
  const smallToLargeMap: Record<string, string> = {
    'ã': 'ã‚', 'ãƒ': 'ã„', 'ã…': 'ã†', 'ã‡': 'ãˆ', 'ã‰': 'ãŠ',
    'ã‚ƒ': 'ã‚„', 'ã‚…': 'ã‚†', 'ã‚‡': 'ã‚ˆ', 'ã£': 'ã¤', 'ã‚': 'ã‚'
  };
  
  let normalized = '';
  for (const char of word) {
    let c = char;
    if (dakutenMap[c]) c = dakutenMap[c];
    if (smallToLargeMap[c]) c = smallToLargeMap[c];
    normalized += c;
  }
  
  return normalized;
}
```

---

## ç”»é¢è¨­è¨ˆ

### ç”»é¢ä¸€è¦§

| ç”»é¢å | ãƒ‘ã‚¹ | èª¬æ˜ |
|--------|------|------|
| ãƒˆãƒƒãƒ— | `/` | ãƒ«ãƒ¼ãƒ ä½œæˆãƒ»å‚åŠ ã®å…¥å£ |
| ãƒ­ãƒ“ãƒ¼ | `/room/{roomId}/lobby` | å‚åŠ è€…ä¸€è¦§ã€ã‚²ãƒ¼ãƒ è¨­å®šã€é–‹å§‹å¾…ã¡ |
| è¨€è‘‰å…¥åŠ› | `/room/{roomId}/input` | ç§˜å¯†ã®è¨€è‘‰ã‚’å…¥åŠ› |
| ã‚²ãƒ¼ãƒ  | `/room/{roomId}/game` | ãƒ¡ã‚¤ãƒ³ã®ã‚²ãƒ¼ãƒ ç”»é¢ |
| çµæœ | `/room/{roomId}/result` | å‹æ•—è¡¨ç¤ºã€è¨€è‘‰å…¬é–‹ |

### ç”»é¢è©³ç´°

#### 1. ãƒˆãƒƒãƒ—ç”»é¢ `/`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚        ã‚ã„ã†ãˆãƒãƒˆãƒ« Online        â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚      ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã™ã‚‹       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ãƒ«ãƒ¼ãƒ ID: [______________]  â”‚   â”‚
â”‚   â”‚        å‚åŠ ã™ã‚‹             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ãƒ«ãƒ¼ãƒ ä½œæˆæ™‚ã¯6æ¡ã®ãƒ©ãƒ³ãƒ€ãƒ IDã‚’ç”Ÿæˆ
- URLã§ã®å…±æœ‰ã‚‚å¯èƒ½ã«ã™ã‚‹ï¼ˆä¾‹ï¼š`/room/ABC123`ï¼‰

#### 2. ãƒ­ãƒ“ãƒ¼ç”»é¢ `/room/{roomId}/lobby`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ«ãƒ¼ãƒ : ABC123         [URLã‚’ã‚³ãƒ”ãƒ¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ ãŠé¡Œ: [å‹•ç‰©          â–¼]             â”‚
â”‚                                     â”‚
â”‚ å‚åŠ è€… (3/5):                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ ğŸ‘‘ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1 (ãƒ›ã‚¹ãƒˆ)     â”‚     â”‚
â”‚ â”‚    ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2              â”‚     â”‚
â”‚ â”‚    ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼3              â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                     â”‚
â”‚ â€»2äººä»¥ä¸Šã§ã‚²ãƒ¼ãƒ é–‹å§‹ã§ãã¾ã™        â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚       ã‚²ãƒ¼ãƒ é–‹å§‹            â”‚   â”‚ â† ãƒ›ã‚¹ãƒˆã®ã¿è¡¨ç¤º
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ãŠé¡Œã¯ãƒ—ãƒªã‚»ãƒƒãƒˆ + è‡ªç”±å…¥åŠ›
- ãƒ—ãƒªã‚»ãƒƒãƒˆä¾‹ï¼šå‹•ç‰©ã€é£Ÿã¹ã‚‚ã®ã€å›½ã®åå‰ã€è¡ŒããŸã„æ‰€ã€èµ¤ã„ã‚‚ã®ã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å

#### 3. è¨€è‘‰å…¥åŠ›ç”»é¢ `/room/{roomId}/input`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚ ãŠé¡Œ: ã€Œå‹•ç‰©ã€                      â”‚
â”‚                                     â”‚
â”‚ 2ã€œ7æ–‡å­—ã®ã²ã‚‰ãŒãªã§å…¥åŠ›ã—ã¦ãã ã•ã„ â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ [ã][ã‚Š][ã‚“][ ][ ][ ][ ]    â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                     â”‚
â”‚ â€»æ¿ç‚¹ãƒ»åŠæ¿ç‚¹ã¯è‡ªå‹•ã§é™¤å»ã•ã‚Œã¾ã™   â”‚
â”‚ â€»å°æ–‡å­—ã¯å¤§æ–‡å­—ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™     â”‚
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚          æ±ºå®š              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚ å…¥åŠ›å¾…ã¡: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2, ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼3  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4. ã‚²ãƒ¼ãƒ ç”»é¢ `/room/{roomId}/game`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãŠé¡Œ: ã€Œå‹•ç‰©ã€                    ã‚ãªãŸã®ç•ªã§ã™ï¼  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚ â”Œâ”€ 50éŸ³ãƒœãƒ¼ãƒ‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [ã‚][ã„][ã†][ãˆ][ãŠ]                          â”‚   â”‚
â”‚ â”‚ [ã‹][Ã—][ã][ã‘][ã“]  â† æ”»æ’ƒæ¸ˆã¿ã¯Ã—è¡¨ç¤º       â”‚   â”‚
â”‚ â”‚ [ã•][ã—][ã™][ã›][ã]                          â”‚   â”‚
â”‚ â”‚ [ãŸ][ã¡][ã¤][ã¦][ã¨]                          â”‚   â”‚
â”‚ â”‚ [ãª][ã«][ã¬][ã­][ã®]                          â”‚   â”‚
â”‚ â”‚ [ã¯][ã²][ãµ][ã¸][ã»]                          â”‚   â”‚
â”‚ â”‚ [ã¾][ã¿][ã‚€][ã‚][ã‚‚]                          â”‚   â”‚
â”‚ â”‚ [ã‚„]   [ã‚†]   [ã‚ˆ]                            â”‚   â”‚
â”‚ â”‚ [ã‚‰][ã‚Š][ã‚‹][ã‚Œ][ã‚]                          â”‚   â”‚
â”‚ â”‚ [ã‚]         [ã‚’]                             â”‚   â”‚
â”‚ â”‚ [ã‚“]                                          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ³:                                     â”‚
â”‚                                                     â”‚
â”‚ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1 (è‡ªåˆ†):  [ã][?][?]                     â”‚
â”‚ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2:         [?][?][ã†]                     â”‚
â”‚ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼3:         [?][?][?][?] â† æ‰‹ç•ª           â”‚
â”‚ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼4:         è„±è½ï¼ˆç­”ãˆ: ãã†ï¼‰             â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- è‡ªåˆ†ã®æ‰‹ç•ªã§ã®ã¿50éŸ³ãƒœãƒ¼ãƒ‰ãŒã‚¯ãƒªãƒƒã‚¯å¯èƒ½
- å…¬é–‹ã•ã‚ŒãŸæ–‡å­—ã¯è¡¨ç¤ºã€æœªå…¬é–‹ã¯ã€Œ?ã€
- è„±è½ã—ãŸãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ç­”ãˆã‚’è¡¨ç¤º

#### 5. çµæœç”»é¢ `/room/{roomId}/result`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚           ğŸ‰ å‹è€… ğŸ‰               â”‚
â”‚          ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1               â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã¿ã‚“ãªã®è¨€è‘‰:                       â”‚
â”‚                                     â”‚
â”‚ ğŸ¥‡ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1: ãã‚Šã‚“              â”‚
â”‚ ğŸ¥ˆ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2: ã—ã¾ã†ã¾            â”‚
â”‚    ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼3: ãã†                â”‚
â”‚    ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼4: ã„ã¬                â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚      ã‚‚ã†ä¸€åº¦éŠã¶           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚       ãƒ­ãƒ“ãƒ¼ã«æˆ»ã‚‹          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ„ãƒªãƒ¼

```
App
â”œâ”€â”€ TopPage
â”‚   â”œâ”€â”€ CreateRoomButton
â”‚   â””â”€â”€ JoinRoomForm
â”œâ”€â”€ LobbyPage
â”‚   â”œâ”€â”€ RoomInfo
â”‚   â”œâ”€â”€ PlayerList
â”‚   â”œâ”€â”€ ThemeSelector
â”‚   â””â”€â”€ StartGameButton
â”œâ”€â”€ InputPage
â”‚   â”œâ”€â”€ ThemeDisplay
â”‚   â”œâ”€â”€ WordInput
â”‚   â””â”€â”€ WaitingStatus
â”œâ”€â”€ GamePage
â”‚   â”œâ”€â”€ HiraganaBoard
â”‚   â”œâ”€â”€ PlayerStatusList
â”‚   â”‚   â””â”€â”€ PlayerStatus
â”‚   â”œâ”€â”€ TurnIndicator
â”‚   â””â”€â”€ AttackLog
â””â”€â”€ ResultPage
    â”œâ”€â”€ WinnerDisplay
    â”œâ”€â”€ WordRevealList
    â””â”€â”€ ActionButtons
```

### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°

#### HiraganaBoard

```typescript
interface HiraganaBoardProps {
  attackedLetters: string[];
  disabled: boolean;
  onAttack: (letter: string) => void;
}

// 50éŸ³ã®é…åˆ—
const HIRAGANA_ROWS = [
  ['ã‚', 'ã„', 'ã†', 'ãˆ', 'ãŠ'],
  ['ã‹', 'ã', 'ã', 'ã‘', 'ã“'],
  ['ã•', 'ã—', 'ã™', 'ã›', 'ã'],
  ['ãŸ', 'ã¡', 'ã¤', 'ã¦', 'ã¨'],
  ['ãª', 'ã«', 'ã¬', 'ã­', 'ã®'],
  ['ã¯', 'ã²', 'ãµ', 'ã¸', 'ã»'],
  ['ã¾', 'ã¿', 'ã‚€', 'ã‚', 'ã‚‚'],
  ['ã‚„', '', 'ã‚†', '', 'ã‚ˆ'],
  ['ã‚‰', 'ã‚Š', 'ã‚‹', 'ã‚Œ', 'ã‚'],
  ['ã‚', '', '', '', 'ã‚’'],
  ['ã‚“', '', '', '', ''],
];
```

#### PlayerStatus

```typescript
interface PlayerStatusProps {
  player: {
    id: string;
    name: string;
    wordLength: number;
    revealedPositions: number[];
    revealedLetters: Record<number, string>;  // ä½ç½® â†’ æ–‡å­—
    isEliminated: boolean;
    eliminatedWord?: string;  // è„±è½æ™‚ã«å…¬é–‹
  };
  isCurrentTurn: boolean;
  isMe: boolean;
}
```

---

## å®Ÿè£…ã‚¿ã‚¹ã‚¯

### Phase 1: åŸºç›¤æ§‹ç¯‰
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆReact + Firebaseï¼‰
- [ ] Firebaseè¨­å®šï¼ˆAuth, Firestore, Functionsï¼‰
- [ ] ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š
- [ ] å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
- [ ] åŒ¿åèªè¨¼ã®å®Ÿè£…

### Phase 2: ãƒ«ãƒ¼ãƒ ç®¡ç†
- [ ] ãƒ«ãƒ¼ãƒ ä½œæˆæ©Ÿèƒ½
- [ ] ãƒ«ãƒ¼ãƒ IDç”Ÿæˆï¼ˆ6æ¡è‹±æ•°å­—ï¼‰
- [ ] ãƒ«ãƒ¼ãƒ å‚åŠ æ©Ÿèƒ½
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‚åŠ /é€€å‡ºï¼‰
- [ ] ãƒ›ã‚¹ãƒˆæ¨©é™ã®å®Ÿè£…
- [ ] ãƒ­ãƒ“ãƒ¼ç”»é¢UI

### Phase 3: ã‚²ãƒ¼ãƒ æº–å‚™
- [ ] ãŠé¡Œé¸æŠæ©Ÿèƒ½
- [ ] è¨€è‘‰å…¥åŠ›ç”»é¢UI
- [ ] å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] æ–‡å­—æ­£è¦åŒ–ï¼ˆæ¿ç‚¹é™¤å»ã€å°æ–‡å­—â†’å¤§æ–‡å­—ï¼‰
- [ ] å…¥åŠ›å®Œäº†å¾…ã¡åˆã‚ã›

### Phase 4: ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯
- [ ] Cloud Functions: attackLetter
- [ ] 50éŸ³ãƒœãƒ¼ãƒ‰UI
- [ ] æ”»æ’ƒå‡¦ç†ã®å®Ÿè£…
- [ ] åˆ¤å®šçµæœã®è¡¨ç¤º
- [ ] ã‚¿ãƒ¼ãƒ³ç®¡ç†
- [ ] è„±è½åˆ¤å®š
- [ ] å‹åˆ©åˆ¤å®š

### Phase 5: ã‚²ãƒ¼ãƒ ç”»é¢
- [ ] ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ³è¡¨ç¤º
- [ ] å…¬é–‹/æœªå…¬é–‹æ–‡å­—ã®è¡¨ç¤º
- [ ] æ‰‹ç•ªè¡¨ç¤º
- [ ] æ”»æ’ƒã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] è„±è½æ¼”å‡º

### Phase 6: çµæœãƒ»è¿½åŠ æ©Ÿèƒ½
- [ ] çµæœç”»é¢
- [ ] è¨€è‘‰å…¬é–‹
- [ ] å†æˆ¦æ©Ÿèƒ½
- [ ] ãƒ­ãƒ“ãƒ¼ã«æˆ»ã‚‹æ©Ÿèƒ½
- [ ] åˆ‡æ–­æ™‚ã®å‡¦ç†
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### Phase 7: æ”¹å–„ãƒ»è¿½åŠ æ©Ÿèƒ½ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] ãŠé¡Œã‚«ãƒ¼ãƒ‰ã®ãƒ©ãƒ³ãƒ€ãƒ å‡ºé¡Œ
- [ ] å…¥åŠ›åˆ¶é™æ™‚é–“
- [ ] è¦³æˆ¦ãƒ¢ãƒ¼ãƒ‰
- [ ] ãƒãƒ£ãƒƒãƒˆ / ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- [ ] **ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆç‰ˆï¼ˆA-Zï¼‰å¯¾å¿œ**
- [ ] ã‚µã‚¦ãƒ³ãƒ‰ãƒ»åŠ¹æœéŸ³
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æœ€é©åŒ–

---

## æ³¨æ„äº‹é …

### è‘—ä½œæ¨©ã«ã¤ã„ã¦
- ã€Œã‚ã„ã†ãˆãƒãƒˆãƒ«ã€ã¯ç±³å…‰ä¸€æˆæ°/Anagumaã®ã‚²ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³
- å€‹äººåˆ©ç”¨ãƒ»å­¦ç¿’ç›®çš„ãªã‚‰å•é¡Œãªã„ãŒã€å…¬é–‹ãƒ»é…å¸ƒã™ã‚‹å ´åˆã¯æ¨©åˆ©è€…ã¸ã®ç¢ºèªã‚’æ¨å¥¨

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- ç§˜å¯†ã®è¨€è‘‰ã¯å¿…ãšCloud FunctionsçµŒç”±ã§åˆ¤å®šã™ã‚‹
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ä»–ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ç§˜å¯†ã®è¨€è‘‰ã‚’é€ã‚‰ãªã„
- Firestoreã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ã‚’é©åˆ‡ã«è¨­å®šã™ã‚‹

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒªã‚¹ãƒŠãƒ¼ã¯å¿…è¦æœ€å°é™ã«
- ä¸è¦ã«ãªã£ãŸãƒªã‚¹ãƒŠãƒ¼ã¯è§£é™¤ã™ã‚‹
- ç”»é¢é·ç§»æ™‚ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’å¿˜ã‚Œãšã«

---

## ç¢ºèªäº‹é …ï¼ˆé–‹ç™ºé–‹å§‹å‰ã«æ±ºã‚ã‚‹ã“ã¨ï¼‰

1. **æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã®é–¢ä¿‚**
   - æ—¢å­˜ã®ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è¿½åŠ ï¼Ÿ
   - æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ä½œæˆï¼Ÿ

2. **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**
   - ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: React? Next.js? Vue?
   - ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°: Tailwind? CSS Modules? styled-components?
   - çŠ¶æ…‹ç®¡ç†: useState? Zustand? Redux?

3. **Firebase**
   - æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ï¼Ÿ
   - Blazeãƒ—ãƒ©ãƒ³ï¼ˆCloud Functionså¿…é ˆï¼‰

4. **èªè¨¼æ–¹å¼**
   - åŒ¿åèªè¨¼ã®ã¿ï¼Ÿ
   - Googleãƒ­ã‚°ã‚¤ãƒ³ã‚‚å¯¾å¿œï¼Ÿ
   - ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã®ä¿å­˜æ–¹æ³•

5. **ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆ**
   - Firebase Hosting?
   - Vercel?

---

---

## ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆç‰ˆï¼ˆå°†æ¥å¯¾å¿œãƒ»è‰æ¡ˆï¼‰

ã²ã‚‰ãŒãªç‰ˆã®å®Ÿè£…å®Œäº†å¾Œã«å¯¾å¿œäºˆå®šã€‚

### åŸºæœ¬æ–¹é‡
- ã²ã‚‰ãŒãªç‰ˆã¨åŒã˜ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨
- ãƒœãƒ¼ãƒ‰ã‚’50éŸ³ â†’ A-Zï¼ˆ26æ–‡å­—ï¼‰ã«å·®ã—æ›¿ãˆ
- ãƒ«ãƒ¼ãƒ ä½œæˆæ™‚ or ã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ã«ãƒ¢ãƒ¼ãƒ‰é¸æŠ

### å¤‰æ›´ç‚¹
| é …ç›® | ã²ã‚‰ãŒãªç‰ˆ | ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆç‰ˆ |
|------|-----------|-----------------|
| ãƒœãƒ¼ãƒ‰ | 50éŸ³ï¼ˆ46æ–‡å­—ï¼‰ | A-Zï¼ˆ26æ–‡å­—ï¼‰ |
| æ­£è¦åŒ– | æ¿ç‚¹é™¤å»ã€å°æ–‡å­—â†’å¤§æ–‡å­— | å°æ–‡å­—â†’å¤§æ–‡å­—ã®ã¿ |
| ãŠé¡Œä¾‹ | å‹•ç‰©ã€é£Ÿã¹ã‚‚ã® | Animals, Foods |

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®æ‹¡å¼µæ¡ˆ
```javascript
rooms/{roomId}: {
  // ...æ—¢å­˜ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  mode: "hiragana" | "alphabet",  // è¿½åŠ 
}
```

### å®Ÿè£…æ™‚ã®æ³¨æ„
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ±ç”¨åŒ–ã—ã¦ãŠãï¼ˆHiraganaBoard â†’ LetterBoardï¼‰
- æ­£è¦åŒ–ãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ¢ãƒ¼ãƒ‰åˆ¥ã«åˆ†å²
- å¤šè¨€èªå¯¾å¿œï¼ˆUIæ–‡è¨€ï¼‰ã¯åˆ¥é€”æ¤œè¨

---

## å‚è€ƒãƒªãƒ³ã‚¯

- å‚è€ƒå…ƒã‚²ãƒ¼ãƒ : https://www.gentosha-edu.co.jp/smp/book/b640622.html
- Firebase Docs: https://firebase.google.com/docs
- Firebase Security Rules: https://firebase.google.com/docs/firestore/security/get-started
